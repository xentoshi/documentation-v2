"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[3191],{7458:(e,r,i)=>{i.r(r),i.d(r,{assets:()=>o,contentTitle:()=>d,default:()=>h,frontMatter:()=>n,metadata:()=>l,toc:()=>c});var t=i(5893),s=i(1151);const n={title:"Order Types",slug:"EUrr-order-types",createdAt:"Wed Jul 20 2022 10:40:24 GMT+0000 (Coordinated Universal Time)",updatedAt:"Fri Nov 03 2023 11:04:50 GMT+0000 (Coordinated Universal Time)"},d=void 0,l={id:"Drift Protocol v2 Docs/Order Types",title:"Order Types",description:"Drift supports the following order types:&#x20;",source:"@site/docs/Drift Protocol v2 Docs/Order Types.md",sourceDirName:"Drift Protocol v2 Docs",slug:"/Drift Protocol v2 Docs/EUrr-order-types",permalink:"/documentation-v2/docs/Drift Protocol v2 Docs/EUrr-order-types",draft:!1,unlisted:!1,editUrl:"https://github.com/drift-labs/documentation-v2/blob/master/docs/Drift Protocol v2 Docs/Order Types.md",tags:[],version:"current",frontMatter:{title:"Order Types",slug:"EUrr-order-types",createdAt:"Wed Jul 20 2022 10:40:24 GMT+0000 (Coordinated Universal Time)",updatedAt:"Fri Nov 03 2023 11:04:50 GMT+0000 (Coordinated Universal Time)"},sidebar:"tutorialSidebar",previous:{title:"Oracles",permalink:"/documentation-v2/docs/Drift Protocol v2 Docs/22EZ-oracles"},next:{title:"P&L Pool",permalink:"/documentation-v2/docs/Drift Protocol v2 Docs/jVwx-pandl-pool"}},o={},c=[{value:"Market Orders",id:"market-orders",level:2},{value:"<strong>Limit Orders</strong>",id:"limit-orders",level:2},{value:"Advanced Orders",id:"advanced-orders",level:2},{value:"Stop Market",id:"stop-market",level:3},{value:"Stop Limit",id:"stop-limit",level:3},{value:"Take Profit Market",id:"take-profit-market",level:3},{value:"Take Profit Limit",id:"take-profit-limit",level:3},{value:"Order Flags",id:"order-flags",level:3}];function a(e){const r={a:"a",div:"div",h2:"h2",h3:"h3",li:"li",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.p,{children:"Drift supports the following order types: "}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsxs)(r.li,{children:["\n",(0,t.jsx)(r.p,{children:"market orders;"}),"\n"]}),"\n",(0,t.jsxs)(r.li,{children:["\n",(0,t.jsx)(r.p,{children:"limit orders; and "}),"\n"]}),"\n",(0,t.jsxs)(r.li,{children:["\n",(0,t.jsx)(r.p,{children:"advanced conditional orders. "}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(r.h2,{id:"market-orders",children:"Market Orders"}),"\n",(0,t.jsxs)(r.p,{children:["A ",(0,t.jsx)(r.strong,{children:"Market Order"})," is an order to buy or sell an asset immediately at the current Market Price."]}),"\n",(0,t.jsxs)(r.p,{children:["Users can set a maximum ",(0,t.jsx)(r.strong,{children:"slippage tolerance"}),". A slippage tolerance sets an upper bound for the price that the order can be filled at, which is effectively a limit price versus the current market price. "]}),"\n",(0,t.jsx)(r.p,{children:"For instance, if the mark price of SOL-PERP is $100.00 and a user goes long, a user can set a maximum slippage tolerance of 0.1%. As such, the worst price that a user can fill at is $100.10. The order will fail if the quoted price exceeds the limit price (with slippage tolerance) for makers. "}),"\n",(0,t.jsx)(r.p,{children:"Market Orders will trigger a Just-In-Time auction, where market makers will be able to participate in a 5-second Dutch auction to fill the user's orders. As the 5-second JIT auction finishes, the user's orders will be completed if the price is within their slippage tolerance limit order. If no market maker steps in during the JIT Auction, the remaining order will be filled against Drift's DAMM."}),"\n",(0,t.jsx)(r.p,{children:"Executing a Market Order does not mean the order will execute at exactly the price displayed as the mark price of an asset may change before the JIT Auction is complete.  "}),"\n",(0,t.jsxs)(r.div,{children:[(0,t.jsx)(r.p,{children:"The fee paid depends on whether the order is a taker order or a maker order. "}),(0,t.jsx)(r.p,{children:"Maker orders are Limit orders with a 'Post' flag."}),(0,t.jsxs)(r.p,{children:["See ",(0,t.jsx)(r.a,{href:"/documentation-v2/docs/Drift%20Protocol%20v2%20Docs/3F0d-trading-fees",children:"Trading Fees"})," and ",(0,t.jsx)(r.a,{href:"/documentation-v2/docs/Drift%20Protocol%20v2%20Docs/p4qc-advanced-orders-faq",children:"Advanced Orders FAQ"})," for more information."]})]}),"\n",(0,t.jsx)(r.h2,{id:"limit-orders",children:(0,t.jsx)(r.strong,{children:"Limit Orders"})}),"\n",(0,t.jsx)(r.p,{children:"The Drift DEX supports a number of queued order types. "}),"\n",(0,t.jsxs)(r.p,{children:["These orders take against the DAMM and are executed by a decentralised network of keepers, see",(0,t.jsx)(r.a,{href:"/documentation-v2/docs/Drift%20Protocol%20v2%20Docs/IvA9-decentralised-orderbook-faq",children:"Decentralised Orderbook FAQ"}),", once certain conditions are met (i.e. the mark price crosses the specified trigger/limit price)."]}),"\n",(0,t.jsxs)(r.p,{children:["These orders are executed ",(0,t.jsx)(r.strong,{children:"'best effort'"})," by the network with special economic incentives designed to mimic the typical execution order seen in a Centralised Limit Order Book (CLOB)."]}),"\n",(0,t.jsx)(r.p,{children:"A Limit Order is an order to buy or sell a given asset at a specified price."}),"\n",(0,t.jsx)(r.p,{children:"Users can specify a Limit Price they wish to be filled at. "}),"\n",(0,t.jsx)(r.p,{children:"If or when the mark price of an asset moves to cross the Limit Price, the order will partially fill up to this Limit Price every time a keeper executes it. "}),"\n",(0,t.jsx)(r.p,{children:"For taker orders, a user's resulting Entry Price is guaranteed to be equal to or better than the Limit Price specified. "}),"\n",(0,t.jsx)(r.p,{children:'If the "Post" order flag is set, then the order will be filled at the specified limit price with a variable rebate. This variable rebate comes from the liquidity surplus from the taker fills that cross after accounting for the filler reward (which is capped at 5bps).'}),"\n",(0,t.jsx)(r.h2,{id:"advanced-orders",children:"Advanced Orders"}),"\n",(0,t.jsx)(r.h3,{id:"stop-market",children:"Stop Market"}),"\n",(0,t.jsx)(r.p,{children:"A Stop Market Order is an order to close the position of a given asset if its Oracle Price reaches the specified Trigger Price. If this happens, the position is closed at Market Price. "}),"\n",(0,t.jsx)(r.p,{children:"Users can specify a Trigger Price, and once (or if) the of the asset reaches the specified Trigger Price and a keeper executes it, a Market Order to sell the asset will be executed."}),"\n",(0,t.jsx)(r.h3,{id:"stop-limit",children:"Stop Limit"}),"\n",(0,t.jsx)(r.p,{children:"A Stop Limit Order will only execute where the Oracle Price of a given asset reaches the Trigger Price. If this happens, a Limit Order at the specified Limit Price will be placed. Once triggered, the resulting Limit Order may be immediately filled or may rest until the specified Limit Price is reached and executed by a decentralised keeper. "}),"\n",(0,t.jsx)(r.p,{children:"Users can specify a Trigger Price and a Limit Price, and once (or if) the mark price of the asset reaches the specified Trigger Price and a keeper executes it, a Limit Order will be placed at the specified Limit Price. "}),"\n",(0,t.jsx)(r.p,{children:"Stop Limit Orders also serve as a maximum slippage tolerance for the Stop Order."}),"\n",(0,t.jsxs)(r.table,{children:[(0,t.jsx)(r.thead,{children:(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.th,{children:"Current Position"}),(0,t.jsx)(r.th,{children:"Order Type"}),(0,t.jsx)(r.th,{children:"Trade Direction"}),(0,t.jsx)(r.th,{children:"Trigger Condition"}),(0,t.jsx)(r.th,{children:"Reduce Only "})]})}),(0,t.jsxs)(r.tbody,{children:[(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"Long"}),(0,t.jsx)(r.td,{children:"Stop (Market If Touch)"}),(0,t.jsx)(r.td,{children:"Buy"}),(0,t.jsx)(r.td,{children:"Below"}),(0,t.jsx)(r.td,{children:"False"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.strong,{children:"Long"})}),(0,t.jsx)(r.td,{children:(0,t.jsx)(r.strong,{children:"Stop"})}),(0,t.jsx)(r.td,{children:(0,t.jsx)(r.strong,{children:"Sell"})}),(0,t.jsx)(r.td,{children:(0,t.jsx)(r.strong,{children:"Below"})}),(0,t.jsx)(r.td,{children:(0,t.jsx)(r.strong,{children:"True/False"})})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.strong,{children:"Short"})}),(0,t.jsx)(r.td,{children:(0,t.jsx)(r.strong,{children:"Stop"})}),(0,t.jsx)(r.td,{children:(0,t.jsx)(r.strong,{children:"Buy"})}),(0,t.jsx)(r.td,{children:(0,t.jsx)(r.strong,{children:"Above"})}),(0,t.jsx)(r.td,{children:(0,t.jsx)(r.strong,{children:"True/False"})})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"Short"}),(0,t.jsx)(r.td,{children:"Stop (Market If Touch)"}),(0,t.jsx)(r.td,{children:"Sell"}),(0,t.jsx)(r.td,{children:"Above"}),(0,t.jsx)(r.td,{children:"False"})]})]})]}),"\n",(0,t.jsx)(r.h3,{id:"take-profit-market",children:"Take Profit Market"}),"\n",(0,t.jsx)(r.p,{children:"A Take Profit Order is an order to close the position of a given asset if its Oracle Price reaches the specified Trigger Price. If this happens, the position is closed at Market Price. "}),"\n",(0,t.jsx)(r.p,{children:"Users can specify a Trigger Price, and once (or if) the oracle price of the asset reaches the specified Trigger Price and a keeper executes it, a Market Order to sell the asset will be executed."}),"\n",(0,t.jsx)(r.h3,{id:"take-profit-limit",children:"Take Profit Limit"}),"\n",(0,t.jsx)(r.p,{children:"A Take Profit Limit Order will only execute where the Oracle Price of a given asset reaches the Trigger Price. If this happens, a Limit Order at the specified Limit Price will be placed. Once triggered, the resulting Limit Order may be immediately filled or may rest until the specified Limit Price is reached and executed by a decentralised keeper. "}),"\n",(0,t.jsx)(r.p,{children:"Users can specify a Trigger Price and a Limit Price, and once (or if) the oracle price of the asset reaches the specified Trigger Price and a keeper executes it, a Limit Order will be placed at the specified Limit Price. "}),"\n",(0,t.jsx)(r.p,{children:"Take Profit Limit Orders also serve as a max slippage tolerance for the Stop Order."}),"\n",(0,t.jsxs)(r.table,{children:[(0,t.jsx)(r.thead,{children:(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.th,{children:"Current Position"}),(0,t.jsx)(r.th,{children:"Order Type"}),(0,t.jsx)(r.th,{children:"Trade Direction"}),(0,t.jsx)(r.th,{children:"Trigger Condition"}),(0,t.jsx)(r.th,{children:"Reduce Only"})]})}),(0,t.jsxs)(r.tbody,{children:[(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"Long"}),(0,t.jsx)(r.td,{children:"Take Profit (Market If Touch)"}),(0,t.jsx)(r.td,{children:"Buy"}),(0,t.jsx)(r.td,{children:"Above"}),(0,t.jsx)(r.td,{children:"False"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.strong,{children:"Long"})}),(0,t.jsx)(r.td,{children:(0,t.jsx)(r.strong,{children:"Take Profit"})}),(0,t.jsx)(r.td,{children:(0,t.jsx)(r.strong,{children:"Sell"})}),(0,t.jsx)(r.td,{children:(0,t.jsx)(r.strong,{children:"Above"})}),(0,t.jsx)(r.td,{children:(0,t.jsx)(r.strong,{children:"True/False"})})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.strong,{children:"Short"})}),(0,t.jsx)(r.td,{children:(0,t.jsx)(r.strong,{children:"Take Profit"})}),(0,t.jsx)(r.td,{children:(0,t.jsx)(r.strong,{children:"Buy"})}),(0,t.jsx)(r.td,{children:(0,t.jsx)(r.strong,{children:"Below"})}),(0,t.jsx)(r.td,{children:(0,t.jsx)(r.strong,{children:"True/False"})})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"Short"}),(0,t.jsx)(r.td,{children:"Take Profit (Market If Touch)"}),(0,t.jsx)(r.td,{children:"Sell"}),(0,t.jsx)(r.td,{children:"Below"}),(0,t.jsx)(r.td,{children:"False"})]})]})]}),"\n",(0,t.jsxs)(r.div,{children:[(0,t.jsxs)(r.p,{children:[(0,t.jsx)(r.strong,{children:"If Trigger Price < Limit Price:"})," order starts getting filled once the price is below the trigger price."]}),(0,t.jsx)(r.p,{children:"**If Limit Price < Trigger Price: **order starts getting filled once the price is below the limit price."})]}),"\n",(0,t.jsxs)(r.div,{children:[(0,t.jsx)(r.p,{children:"One limitation is that the protocol can only detect that a Trigger Price has been\xa0hit if the order has already been or can be partially filled. This means it does not allow for some order configurations to be placed:"}),(0,t.jsx)(r.p,{children:"TriggerIsAbove | DirectionIsLong | LimitPrice\n------------------------------------------------\nTrue | True | Must be above trigger\nTrue | False | Ok\nFalse | True | Ok\nFalse | False | Must be below trigger"}),(0,t.jsx)(r.p,{children:"*Example:\n*If Trigger Price is >$140 and a Long is placed with a Limit Price = $135, there is no way the order can know that $140 was hit before you try to long when the price falls $5."}),(0,t.jsx)(r.p,{children:"In the other scenario, if Trigger Price is < $140 and a Long is placed with a Limit Price = $135, we will know that $140 (AND $135) must have been hit since you were partially filled."}),(0,t.jsx)(r.h3,{id:"order-flags",children:"Order Flags"}),(0,t.jsx)(r.p,{children:"Additionally, orders can include flags that specify execution parameters. The protocol allows for three additional order flags, as written below:"}),(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsxs)(r.li,{children:["\n",(0,t.jsx)(r.p,{children:"**Reduce-Only: **Enforces that the order will never increase or reverse the current position (go from long to short, or short to long)."}),"\n"]}),"\n",(0,t.jsxs)(r.li,{children:["\n",(0,t.jsxs)(r.p,{children:[(0,t.jsx)(r.strong,{children:"Post-Only"}),": Enforces that the order is a maker order that can provide liquidity to the pool for a reduced exchange fee (0%). Without this flag, orders that don't execute immediately are not post-only."]}),"\n"]}),"\n",(0,t.jsxs)(r.li,{children:["\n",(0,t.jsxs)(r.p,{children:[(0,t.jsx)(r.strong,{children:"Immediate or cancel (IOC)"}),": An order that is placed and potentially partially filled. The remainder that is not filled immediately is then cancelled."]}),"\n"]}),"\n"]})]})]})}function h(e={}){const{wrapper:r}={...(0,s.a)(),...e.components};return r?(0,t.jsx)(r,{...e,children:(0,t.jsx)(a,{...e})}):a(e)}},1151:(e,r,i)=>{i.d(r,{Z:()=>l,a:()=>d});var t=i(7294);const s={},n=t.createContext(s);function d(e){const r=t.useContext(n);return t.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function l(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:d(e.components),t.createElement(n.Provider,{value:r},e.children)}}}]);