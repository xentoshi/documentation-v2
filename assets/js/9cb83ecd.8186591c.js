"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[3693],{3334:(e,t,i)=>{i.r(t),i.d(t,{assets:()=>a,contentTitle:()=>r,default:()=>c,frontMatter:()=>o,metadata:()=>l,toc:()=>d});var n=i(5893),s=i(1151);const o={title:"P&L",slug:"CImq-pandl",createdAt:"Wed Dec 01 2021 15:06:26 GMT+0000 (Coordinated Universal Time)",updatedAt:"Fri Aug 04 2023 11:28:02 GMT+0000 (Coordinated Universal Time)"},r=void 0,l={id:"Drift Protocol v2 Docs/P_L",title:"P&L",description:"Introduction",source:"@site/docs/Drift Protocol v2 Docs/P_L.md",sourceDirName:"Drift Protocol v2 Docs",slug:"/Drift Protocol v2 Docs/CImq-pandl",permalink:"/documentation-v2/docs/Drift Protocol v2 Docs/CImq-pandl",draft:!1,unlisted:!1,editUrl:"https://github.com/drift-labs/documentation-v2/blob/master/docs/Drift Protocol v2 Docs/P_L.md",tags:[],version:"current",frontMatter:{title:"P&L",slug:"CImq-pandl",createdAt:"Wed Dec 01 2021 15:06:26 GMT+0000 (Coordinated Universal Time)",updatedAt:"Fri Aug 04 2023 11:28:02 GMT+0000 (Coordinated Universal Time)"},sidebar:"tutorialSidebar",previous:{title:"P&L Pool",permalink:"/documentation-v2/docs/Drift Protocol v2 Docs/jVwx-pandl-pool"},next:{title:"Program/Vault Addresses",permalink:"/documentation-v2/docs/Drift Protocol v2 Docs/_EqA-programvault-addresses"}},a={},d=[{value:"Introduction",id:"introduction",level:2},{value:"Withdrawing Realised P&amp;L",id:"withdrawing-realised-pl",level:2},{value:"Settling and Claiming your P&amp;L",id:"settling-and-claiming-your-pl",level:3},{value:"What is the difference between Settling P&amp;L and Realising P&amp;L?",id:"what-is-the-difference-between-settling-pl-and-realising-pl",level:2},{value:"Realised P&amp;L",id:"realised-pl",level:3},{value:"Settling P&amp;L",id:"settling-pl",level:3},{value:"Margining of Unsettled P&amp;L ",id:"margining-of-unsettled-pl-",level:3},{value:"Withdrawals",id:"withdrawals",level:3}];function h(e){const t={a:"a",code:"code",div:"div",em:"em",h2:"h2",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,s.a)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.h2,{id:"introduction",children:"Introduction"}),"\n",(0,n.jsx)(t.p,{children:"Profit and Loss, often referred to as P&L or PnL, is a term used to describe the current state of a user's active positions while trading. By observing P&L users will be able to determine whether their positions are either in profit or loss."}),"\n",(0,n.jsx)(t.p,{children:"A user's current position on Drift is the cumulative sum of all their filled orders (increasing, reducing, or closing) over time. All trading lots, per market and per subaccount, are combined into a single position to determine P&L. "}),"\n",(0,n.jsx)(t.p,{children:'The position table below shows the **P&L **for the current position. Users can toggle "$" or "%" to change whether they would like to see **P&L **in dollar terms ($) or in percentage terms (%).'}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{alt:"Positions ",src:i(2371).Z+"",width:"2006",height:"412"})}),"\n",(0,n.jsx)(t.p,{children:"In the above image, the P&L refers to the **unrealised P&L **or **uPNL **of the open positions (SOL-PERP and ETH-PERP shorts). To realise this P&L, users will have to close their positions. "}),"\n",(0,n.jsxs)(t.p,{children:["The PnL in the table above is calculated as the difference between the position's ",(0,n.jsx)(t.code,{children:"Entry Price"})," with the current oracle price multiplied by the ",(0,n.jsx)(t.code,{children:"Size"}),"."]}),"\n",(0,n.jsx)(t.h2,{id:"withdrawing-realised-pl",children:"Withdrawing Realised P&L"}),"\n",(0,n.jsx)(t.p,{children:"A user's realised P&L can only be withdrawn once it has been settled/claimed on-chain. "}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.strong,{children:"*Note: **"}),"realising P&L by closing the position is ",(0,n.jsx)(t.strong,{children:(0,n.jsx)(t.em,{children:"not"})})," the same as settling/claiming P&L. To withdraw a positive P&L, it must be settled/claimed first. *"]}),"\n",(0,n.jsx)(t.h3,{id:"settling-and-claiming-your-pl",children:"Settling and Claiming your P&L"}),"\n",(0,n.jsx)(t.p,{children:"To update the USDC balances available for withdrawal, your P&L must first be settled and claimed."}),"\n",(0,n.jsxs)(t.p,{children:["To do so, navigate to the ",(0,n.jsx)(t.code,{children:"Unrealised PnL"})," tab and select ",(0,n.jsx)(t.code,{children:"Claim"})]}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{src:i(6079).Z+"",width:"1548",height:"372"})}),"\n",(0,n.jsx)(t.p,{children:"Users can claim positive P&L when:"}),"\n",(0,n.jsxs)(t.ol,{children:["\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsx)(t.p,{children:"the open position has been closed or reduced (i.e. your uP&L has been partially or wholly realised); _note: this step is only necessary when the pnl pool balance is limited _"}),"\n"]}),"\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsx)(t.p,{children:"the market's P&L Pool has available balances to claim; and "}),"\n"]}),"\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsx)(t.p,{children:"their Cost Basis is below the Entry Price for longs or above the Entry Price for shorts."}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(t.h2,{id:"what-is-the-difference-between-settling-pl-and-realising-pl",children:"What is the difference between Settling P&L and Realising P&L?"}),"\n",(0,n.jsx)(t.p,{children:"The main difference between settling P&L and realising P&L is that realised P&L is available to be withdrawn and used elsewhere whereas settled P&L is not. "}),"\n",(0,n.jsx)(t.p,{children:"Once realised, your P&L must also be settled and claimed before it can be withdrawn."}),"\n",(0,n.jsx)(t.h3,{id:"realised-pl",children:"Realised P&L"}),"\n",(0,n.jsx)(t.p,{children:"Realised P&L refers to the profit and loss that is realised by the user when they close their position. "}),"\n",(0,n.jsx)(t.p,{children:"For example: "}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsx)(t.p,{children:"If you entered a long position on SOL at $30 and SOL is now $60; you would be in profit with an unrealised P&L of $30. "}),"\n"]}),"\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsx)(t.p,{children:"Similarly, if you entered a short position on SOL at $30 and SOL is now $15; you would be in profit with an unrealised P&L of $15. "}),"\n"]}),"\n"]}),"\n",(0,n.jsxs)(t.p,{children:["The profit and loss in both those examples are known as ",(0,n.jsx)(t.strong,{children:"unrealised P&L"})," (uP&L) as that position is still open. The uP&L of the position will continuously change as the price of the asset changes. "]}),"\n",(0,n.jsxs)(t.p,{children:["Your P&L will not be ",(0,n.jsx)(t.strong,{children:"realised"})," until you close your position. Once you close your position, your uP&L will become ",(0,n.jsx)(t.strong,{children:"realised P&L"})," and you will be out of that perpetual futures position (i.e. you will no longer have exposure to the price movement of that underlying asset). "]}),"\n",(0,n.jsx)(t.h3,{id:"settling-pl",children:"Settling P&L"}),"\n",(0,n.jsx)(t.p,{children:"Settling P&L refers to settling the total funds available in the per-market pool of funds that users can claim. "}),"\n",(0,n.jsxs)(t.p,{children:["This pool is called the ",(0,n.jsx)(t.strong,{children:"P&L Pool"})," (read more here: ",(0,n.jsx)(t.a,{href:"/documentation-v2/docs/Drift%20Protocol%20v2%20Docs/bBlz-accounting-and-settlement",children:"Accounting and Settlement"}),"). "]}),"\n",(0,n.jsx)(t.p,{children:"A trader that has made a profitable trade and realises its profits may wish to withdraw that realised profit."}),"\n",(0,n.jsx)(t.p,{children:"However, users can only withdraw realised profits if there is enough settled P&L available in the P&L Pool. The P&L Pool is comprised of all the accumulated realised losses of other participants in that market. It represents the total amount available for withdrawal."}),"\n",(0,n.jsx)(t.p,{children:"For each dollar to be withdrawn from realised profits, there must also be a corresponding dollar of realised losses (which will be made available in the P&L Pool). This mechanism exists to ensure that users do not withdraw more from the platform than what actually exists."}),"\n",(0,n.jsx)(t.p,{children:"If a user made a profitable trade and has a positive realised P&L from the position, but there isn't enough Settled P&L in the Per-Market P&L pool to pay out the user to withdraw, the user may need to wait for the pool to be replenished by settled losses. "}),"\n",(0,n.jsx)(t.p,{children:"When this occurs, the user's P&L will be considered to be **unsettled P&L. **"}),"\n",(0,n.jsxs)(t.p,{children:["For more information on what happens when there is not enough Settled P&L, read ",(0,n.jsx)(t.a,{href:"/documentation-v2/docs/Drift%20Protocol%20v2%20Docs/jVwx-pandl-pool",children:"P&L Pool"})]}),"\n",(0,n.jsx)(t.h3,{id:"margining-of-unsettled-pl-",children:"Margining of Unsettled P&L "}),"\n",(0,n.jsxs)(t.p,{children:["If positive P&L is unsettled, it may account for less initial margin for trading perpetuals than USDC. Please see the treatment of non-USD assets here ",(0,n.jsx)(t.a,{href:"/documentation-v2/docs/Drift%20Protocol%20v2%20Docs/NtFm-cross-collateral-deposits",children:"Cross-Collateral Deposits"})]}),"\n",(0,n.jsx)(t.p,{children:"Each market has a maximum imbalanced P&L limit. When the net user P&L in a market breaches the limit, the asset weight will be decreased. Additionally, P&L in excess of the limit is subject to deficit resolutions from the Insurance Fund (up to the market's max insurance fund limit). "}),"\n",(0,n.jsxs)(t.div,{children:[(0,n.jsx)(t.p,{children:"Discounting the unsettled P&L lowers the maximum leverage extended for users (and only decreases a user's initial margin). "}),(0,n.jsx)(t.p,{children:"These guards don't lower the maintenance margin weights and are not relevant for liquidations. "})]}),"\n",(0,n.jsx)(t.h3,{id:"withdrawals",children:"Withdrawals"}),"\n",(0,n.jsx)(t.p,{children:"Only the lesser value of your Free Collateral and Asset Balance will be available for withdrawal (without opening a borrow). Realising positive unrealised P&L (by reducing/closing positions) will allow for that P&L to be settled to your Asset Balance for withdrawal."}),"\n",(0,n.jsx)(t.div,{children:(0,n.jsx)(t.p,{children:"A suggestion for users that want to stay in their position and withdraw unrealised profits in excess of their asset balance is to reduce/close then reopen the position. "})}),"\n",(0,n.jsxs)(t.p,{children:["Read more in [[",(0,n.jsx)(t.a,{href:"docId:ZJk_O3cU0Y-rkJFoSY64T",children:"Glossary"})," ](",(0,n.jsx)(t.a,{href:"https://docs.drift.trade/glossary)%5D(",children:"https://docs.drift.trade/glossary)]("}),(0,n.jsx)(t.a,{href:"https://docs.drift.trade/glossary",children:"https://docs.drift.trade/glossary"}),")"]})]})}function c(e={}){const{wrapper:t}={...(0,s.a)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(h,{...e})}):h(e)}},2371:(e,t,i)=>{i.d(t,{Z:()=>n});const n=i.p+"assets/images/91KHvPhXhT6hSgWrqKuJP_image-f5420dcf5e01ca56a68311aeb29deed8.png"},6079:(e,t,i)=>{i.d(t,{Z:()=>n});const n=i.p+"assets/images/exUlUfTpdHsDCKImH_l4z_image-6f8565d487819b5aef0755684436b34d.png"},1151:(e,t,i)=>{i.d(t,{Z:()=>l,a:()=>r});var n=i(7294);const s={},o=n.createContext(s);function r(e){const t=n.useContext(o);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function l(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),n.createElement(o.Provider,{value:t},e.children)}}}]);